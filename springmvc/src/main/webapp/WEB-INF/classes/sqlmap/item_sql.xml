<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="item">
	<select id="getItem" resultType="hashMap">
		select * from item;
	</select>

	<insert id="insert" useGeneratedKeys="true"	keyProperty="id" parameterType="hashMap">
		insert into item(item_name,f_id,price,originalFileName,r_date)
		values(#{item_name},#{f_id},#{price},#{originalFileName},#{r_date});
	</insert>

	<select id="select_detail" parameterType="hashMap" resultType="hashMap">
		SELECT it.*, CODE.description from item it
		LEFT JOIN common_code code
		ON it.f_id = CODE.id
		WHERE it.id = #{id}
	</select>

	<update id="modify" parameterType="hashMap">
		update item
		set f_id = #{f_id}, item_name=#{item_name},price=#{price},m_date=#{m_date}
		where id = #{id};
	</update>

	<delete id="delete" parameterType="hashMap">
		delete from item where id = #{id}
	</delete>

	<select id='selectItemList' resultType="hashMap">
		select * from item
		<if test='itemName != null &amp;&amp;  !itemName.equals("")'>
			WHERE ITEM_NAME LIKE CONCAT('%', #{itemName}, '%')
		</if>
		ORDER BY id DESC
		limit #{offset}, #{pageSize}
	</select>

	<select id='getcount' resultType="int">
		select count(*) from item
		<if test='itemName != null &amp;&amp;  !itemName.equals("")'>
			WHERE ITEM_NAME LIKE CONCAT('%', #{itemName}, '%')
		</if>
	</select>

	<update id="hitUp" parameterType="hashMap">
		update item set hit = hit+1 where id = #{id}
	</update>
</mapper>    